<?php 
    include 'conexao.php';
    include 'cabecalho.php';
    
    $cons_port = "SELECT prt.cd_portfolio,
                        slt.documento AS documento,
                        slt.extensao AS EXTENSAO,
                        slt.link_doc AS LINK_DOC
                        FROM portal_projetos.portfolio prt
                        INNER JOIN (SELECT * FROM portal_projetos.galeria gl WHERE gl.sn_principal = 'S') slt
                        ON slt.cd_portfolio = prt.cd_portfolio";

    
    $result_port = oci_parse($conn_ora, $cons_port);	

    $port = oci_execute($result_port);
    

    $count = 0;

?>
    
    <h11><i class="fa-solid fa-arrow-up-wide-short"></i> Mais Recentes</h11>
    <div class="div_br"> </div>

<?php

    echo '<div id="div_recentes"></div>';

    echo '</br>';

?>

<div class="modal fade" id="modal_portfolio" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content" id="div_portfolio">
            
        </div>
    </div>
</div>

<?php
    include 'rodape.php';
?>

<script>

    
    //CONTADOR AUTOMATICO 
    contador_auto = 0;
    
    //TIPO CONTADOR PADRAO
    cont_padrao = 1; //IDA

    $(document).ready(function() {

        $('#div_recentes').load('mais_recente_portfolio.php?contador=1');

        //CHAMANDO A FUNCAO
        //window.setInterval('mov_recentes()', 5000);
        
    })

    function ajax_modal_portfolio(cd_portfolio){
        $('#div_portfolio').load('funcoes/portfolio/ajax_modal_portfolio.php?cd_portfolio='+cd_portfolio)
        $('#modal_portfolio').modal('show')
    }

    function carrosel_recentes(tipo, contador){
        console.log(contador)

        if(tipo == 2){

                check_contador = contador + 1;
                if(check_contador <= 7){

                    contador = contador + 1
                    $('#div_recentes').load('mais_recente_portfolio.php?contador='+ contador);

                }
            
        }else{

                check_contador = contador - 1;

                if (check_contador > 0){
           
                    contador = contador - 1
                    $('#div_recentes').load('mais_recente_portfolio.php?contador='+ contador);   
                    
                }
        }
    }

    /*

    //FUNCAO MOV RECENTES
    function mov_recentes(){

        //IDA
        if(contador_auto == 0){

            cont_padrao = 1;

        }

        //VOLTA
        if(contador_auto == 7){

            cont_padrao = 2;

        }        

        if(cont_padrao == 1){

            contador_auto = contador_auto + 1;

        }else{

            contador_auto = contador_auto - 1;

        }

        //CHAMANDO FUNCAO CARROSEL RECENTES
        carrosel_recentes(cont_padrao, contador_auto);

    }

    */
    
</script>
