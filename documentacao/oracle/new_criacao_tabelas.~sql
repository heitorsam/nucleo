DROP TABLE nucleoinfo.IT_SOLICITACAO;
CREATE TABLE nucleoinfo.IT_SOLICITACAO(
CD_IT_SOLICITACAO    INT NOT NULL,
CD_SOLICITACAO       INT NOT NULL,
CD_OS_MV             INT NOT NULL,
CKB_QUERY            VARCHAR(10),
CKB_PAINEL           VARCHAR(10),
CKB_RELATORIO        VARCHAR(10),
CKB_DESENVOLVIMENTO  VARCHAR(10),
CD_USUARIO_VALIDADOR VARCHAR(100),
DT_ENTREGA_OS        TIMESTAMP,
DS_CONSIDERACOES     CLOB,
CD_USUARIO_CADASTRO  VARCHAR(20),  
HR_CADASTRO          TIMESTAMP,
CD_USUARIO_ULT_ALT   VARCHAR(20), 
HR_ULT_ALT           TIMESTAMP,


--PRIMARY_KEY
CONSTRAINT PK_CD_IT_SOLICITACAO PRIMARY KEY (CD_IT_SOLICITACAO)

);

DROP SEQUENCE nucleoinfo.SEQ_CD_IT_SOLICITACAO;

CREATE SEQUENCE nucleoinfo.SEQ_CD_IT_SOLICITACAO
START WITH 1    
INCREMENT BY 1
NOCACHE
NOCYCLE;


--DOCUMENTAÇÃO NEW ( CRIAÇÃO DE TABELAS ) 

DROP TABLE nucleoinfo.SOLICITACAO;

CREATE TABLE nucleoinfo.SOLICITACAO(
CD_SOLICITACAO         INT NOT NULL, 
CD_OS_MV               INT NOT NULL, ---FK TABELA SOLICITACAO_OS MV
CD_RESPONSAVEL         VARCHAR(100)
TP_PRIORIDADE          VARCHAR(1), 
TP_TIPO                VARCHAR(1), --(S) --SOLICITACAO DE LEVANTAMENTO DE DADOS
ESTIMATIVA_ENTREGA     DATE,
RAMAL_SOLICITANTE      VARCHAR2(20),
EMAIL_SOLICITANTE      VARCHAR2(50),
SN_CKB_UNICA_VEZ       VARCHAR(20),
SN_CKB_MENSALMENTE     VARCHAR(20),
SN_CKB_TEMPOREAL       VARCHAR(20),
CD_USUARIO_CADASTRO    VARCHAR(20),  ---FK TABELA USUARIOS MV
HR_CADASTRO            TIMESTAMP,
CD_USUARIO_ULT_ALT     VARCHAR(20),  ---FK TABELA USUARIOS MV
HR_ULT_ALT             TIMESTAMP,

--PRIMARY_KEY
CONSTRAINT PK_CD_SOLICITACAO PRIMARY KEY (CD_SOLICITACAO),

--CHECK
CONSTRAINT CK_TP_TIPO
CHECK (TP_TIPO IN ('S')),

--CHECK
CONSTRAINT CK_TP_PRIORIDADE
CHECK (TP_PRIORIDADE IN ('M'))

);

----------------------
--SEQ_CD_SOLICITACAO--
----------------------


DROP SEQUENCE nucleoinfo.SEQ_CD_SOLICITACAO;

CREATE SEQUENCE nucleoinfo.SEQ_CD_SOLICITACAO
START WITH 1    
INCREMENT BY 1
NOCACHE
NOCYCLE;



DROP TABLE nucleoinfo.ANEXOS;

CREATE TABLE nucleoinfo.ANEXOS(
CD_ANEXOS                  INT NOT NULL,
CD_OS_MV                   INT NOT NULL,
DOCUMENTO                  BLOB,
EXTENSAO                   VARCHAR(5),
CD_USUARIO_CADASTRO        VARCHAR(20),
HR_CADASTRO                TIMESTAMP,
CD_USUARIO_ULT_ALT         VARCHAR(20),
HR_ULT_ALT                 TIMESTAMP


);

----------------------
--SEQ_CD_ANEXOS-----
----------------------

DROP SEQUENCE nucleoinfo.SEQ_CD_ANEXOS;

CREATE SEQUENCE nucleoinfo.SEQ_CD_ANEXOS
START WITH 1    
INCREMENT BY 1
NOCACHE
NOCYCLE;


DROP TABLE nucleoinfo.RESPONSAVEL;


CREATE TABLE nucleoinfo.RESPONSAVEL(
CD_RESPONSAVEL         INT NOT NULL,
CD_USUARIO_MV          VARCHAR(40) NOT NULL,
CD_RESPONSAVEL_MV      INT NOT NULL, 
EMAIL                  VARCHAR(100),
CD_USUARIO_CADASTRO    VARCHAR(20),
HR_CADASTRO            TIMESTAMP,
CD_USUARIO_ULT_ALT     VARCHAR(20),
HR_ULT_ALT             TIMESTAMP,

--PRIMARY_KEY
CONSTRAINT PK_CD_RESPONSAVEL PRIMARY KEY (CD_RESPONSAVEL)


);

----------------------
--SEQ_CD_RESPONSAVEL--
----------------------

DROP SEQUENCE nucleoinfo.SEQ_CD_RESPONSAVEL;

CREATE SEQUENCE nucleoinfo.SEQ_CD_RESPONSAVEL
START WITH 1    
INCREMENT BY 1
NOCACHE
NOCYCLE;



